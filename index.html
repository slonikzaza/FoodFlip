<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>FoodFlip</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Montserrat', sans-serif;
      margin: 0;
      padding: 20px;
      background: #f0f2f5;
      color: #333;
    }
    h2, h3, h4 {
      color: #222;
      margin-top: 0;
    }
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 12px 0;
      margin: 8px 6px;
      width: 140px;
      height: 48px;
      border: none;
      border-radius: 24px;
      background: linear-gradient(135deg, #6DD5FA, #2980B9);
      color: white;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: opacity 0.3s ease, transform 0.2s ease;
    }
    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    .btn:hover:not(:disabled) {
      transform: translateY(-2px);
    }
    .btn-danger {
      background: linear-gradient(135deg, #EB5757, #BB2D3B);
      width: 120px;
      font-size: 14px;
    }
    .section {
      display: none;
      margin-top: 20px;
    }
    .modal-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .modal {
      background: #fff;
      padding: 20px;
      border-radius: 16px;
      width: 90%;
      max-width: 400px;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    .modal img {
      width: 160px;
      height: 160px;
      object-fit: cover;
      border-radius: 12px;
      margin-bottom: 12px;
    }
    .tab {
      display: none;
    }
    .tab.active {
      display: block;
    }
    .item {
      background: #fff;
      padding: 14px;
      margin: 10px 0;
      border-radius: 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
    }
    .item img {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border-radius: 10px;
      margin-right: 15px;
    }
    .item-info {
      display: flex;
      align-items: center;
    }
    .item-details {
      line-height: 1.3;
    }
    .disabled {
      opacity: 0.5;
      text-decoration: line-through;
    }
    .navigation-buttons {
      margin-top: 20px;
      text-align: right;
    }
  </style>
</head>
<body>
  <h2>–í–∏–±–µ—Ä–∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω:</h2>
  <button class="btn" onclick="selectRestaurant('mcdonalds')">McDonald's</button>
  <button class="btn" onclick="selectRestaurant('kfc')">Soon</button>

  <!-- –û—Å–Ω–æ–≤–Ω–µ –º–µ–Ω—é -->
  <div id="menuSection" class="section">
    <h3>–ú–µ–Ω—é: <span id="restaurantName"></span></h3>
    <div class="filters">
      <label>–ú–∞–∫—Å. –∫–∞–ª–æ—Ä—ñ—ó:<input type="number" id="calorieFilter" value="1000"></label>
      <label>–ú–∞–∫—Å. —Ü—ñ–Ω–∞ (‚Ç¥): <input type="number" id="priceFilter" value="1000"></label>
      <button class="btn" onclick="filterAndPick()">üé≤ –†–∞–Ω–¥–æ–º</button>
    </div>
    <div id="dishList"></div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–ª—è –≤–∏–±—Ä–∞–Ω–æ—ó —Å—Ç—Ä–∞–≤–∏ (McDonald's) -->
  <div id="dishModalOverlay" class="modal-overlay">
    <div class="modal" id="dishModal">
      <img id="modalDishImg" src="" alt="Dish Image">
      <h3 id="modalDishName"></h3>
      <div class="navigation-buttons">
        <button class="btn" onclick="chooseOnlyDish()">–¢—ñ–ª—å–∫–∏ –±–ª—é–¥–æ</button>
        <button class="btn" onclick="chooseMenu()">–í–∏–±—Ä–∞—Ç–∏ –º–µ–Ω—é</button>
        <button class="btn" onclick="pickAnotherDish()">–Ü–Ω—à–µ (—Ä–∞–Ω–¥–æ–º–Ω–æ)</button>
      </div>
      <div style="margin-top:10px;">
        <button id="modalExcludeBtn" class="btn-danger" onclick="excludeCurrentDish()">–í–∏–∫–ª—é—á–∏—Ç–∏ –∑ —Ä–∞–Ω–¥–æ–º–∞</button>
      </div>
    </div>
  </div>

  <!-- –°–µ–∫—Ü—ñ—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–µ–Ω—é McDonald's -->
  <div id="menuBuilderSection" class="section">
    <h3>–°—Ç–≤–æ—Ä–∏—Ç–∏ –º–µ–Ω—é McDonald's</h3>

    <!-- –í–∫–ª–∞–¥–∫–∏: 1. –ë–ª—é–¥–æ, 2. –°–æ—É—Å–∏, 3. –ù–∞–ø–æ—ó -->
    <div id="dishesTab" class="tab active">
      <h4>1. –û–±–µ—Ä—ñ—Ç—å —Å—Ç—Ä–∞–≤—É (–∑ —Ç—Ä—å–æ—Ö):</h4>
      <div id="firstChoices"></div>
      <div class="navigation-buttons">
        <button id="randomDishBtn" class="btn" onclick="randomizeBuilderDish()">üé≤ –†–∞–Ω–¥–æ–º –±–ª—é–¥–æ</button>
        <button id="toSaucesBtn" class="btn" onclick="toSauces()" disabled>–î–∞–ª—ñ: –°–æ—É—Å–∏</button>
      </div>
    </div>

    <div id="saucesTab" class="tab">
      <h4>2. –û–±–µ—Ä—ñ—Ç—å —Å–æ—É—Å:</h4>
      <div id="saucesList"></div>
      <div class="navigation-buttons">
        <button class="btn" onclick="backToDishes()">–ù–∞–∑–∞–¥</button>
        <button id="randomSauceBtn" class="btn" onclick="randomizeBuilderSauce()">üé≤ –†–∞–Ω–¥–æ–º —Å–æ—É—Å</button>
        <button id="toDrinksBtn" class="btn" onclick="toDrinks()" disabled>–î–∞–ª—ñ: –ù–∞–ø–æ—ó</button>
      </div>
    </div>

    <div id="drinksTab" class="tab">
      <h4>3. –û–±–µ—Ä—ñ—Ç—å –Ω–∞–ø—ñ–π:</h4>
      <div id="drinksList"></div>
      <div class="navigation-buttons">
        <button class="btn" onclick="backToSauces()">–ù–∞–∑–∞–¥</button>
        <button id="randomDrinkBtn" class="btn" onclick="randomizeBuilderDrink()">üé≤ –†–∞–Ω–¥–æ–º –Ω–∞–ø—ñ–π</button>
        <button id="finishMenuBtn" class="btn" onclick="finishMenu()" disabled>–ó–∞–≤–µ—Ä—à–∏—Ç–∏ –º–µ–Ω—é</button>
      </div>
    </div>
  </div>

  <script>
    Telegram.WebApp.ready();

    // === –î–ê–ù–Ü ===
    const menus = {
      mcdonalds: [
        { name: "–ë—ñ–≥ –ú–∞–∫¬Æ", calories: 526, price: 141, img: "https://d3tqkqn8yl74v5.cloudfront.net/TPO-chf_ua_3413_BigMac.png" },
        { name: "–ë—ñ–≥ –¢–µ–π—Å—Ç—ñ –°–∏–Ω–≥–ª", calories: 620, price: 192, img: "https://d3tqkqn8yl74v5.cloudfront.net/TPO-chf_3442_Sdwch_Big_Tasty_Single.jpg" },
        { name: "–¢–µ–π—Å—Ç—ñ –î–∂—É–Ω—ñ–æ—Ä", calories: 400, price: 104, img: "https://d3tqkqn8yl74v5.cloudfront.net/TPO-chf_3441_Sdwch_Big_Tasty_Junior.jpg" },
        { name: "–î–∞–±–ª –ë—ñ–≥ –¢–µ–π—Å—Ç—ñ", calories: 880, price: 271, img: "https://d3tqkqn8yl74v5.cloudfront.net/TPO-chf_3443_Sdwch_Big_Tasty_Double.jpg" },
        { name: "–î–∞–±–ª –†–æ—è–ª –ß—ñ–∑–±—É—Ä–≥–µ—Ä", calories: 760, price: 240, img: "https://d3tqkqn8yl74v5.cloudfront.net/TPO-chf_ua_3415_DoubleRoyalCheeseburger_2.png" },
        { name: "–†–æ—è–ª –ß—ñ–∑–±—É—Ä–≥–µ—Ä", calories: 530, price: 161, img: "https://d3tqkqn8yl74v5.cloudfront.net/TPO-chf_ua_3414_RoyalCheeseburger_2.png" },
        { name: "–ú–∞–∫–ß—ñ–∫–µ–Ω", calories: 448, price: 119, img: "https://d3tqkqn8yl74v5.cloudfront.net/TPO-chf_ua_3416_McChicken.png" },
        { name: "–§—ñ–ª–µ-–æ-–§—ñ—à", calories: 379, price: 117, img: "https://d3tqkqn8yl74v5.cloudfront.net/TPO-chf_ua_3412_File-o-Fish_2025.png" },
        { name: "–î–∞–±–ª –ß—ñ–∑–±—É—Ä–≥–µ—Ä", calories: 475, price: 121, img: "https://d3tqkqn8yl74v5.cloudfront.net/TPO-chf_ua_3411_DoubleCheeseburger.png" },
        { name: "–ß—ñ–∑–±—É—Ä–≥–µ—Ä", calories: 298, price: 73, img: "https://d3tqkqn8yl74v5.cloudfront.net/TPO-chf_ua_3409_Cheeseburger.png" },
        { name: "–ì–∞–º–±—É—Ä–≥–µ—Ä", calories: 249, price: 63, img: "https://d3tqkqn8yl74v5.cloudfront.net/TPO-chf_ua_3408_Hamburger.png" },
        { name: "–ß—ñ–∫–µ–Ω –ú–∞–∫–ù–∞–≥–µ—Ç—Å 6—à—Ç", calories: 265, price: 101, img: "https://d3tqkqn8yl74v5.cloudfront.net/TPO-chf_ua_2130_Nuggets_6.png" },
        { name: "–ß—ñ–∫–µ–Ω –ú–∞–∫–ù–∞–≥–µ—Ç—Å 9—à—Ç", calories: 398, price: 145, img: "https://d3tqkqn8yl74v5.cloudfront.net/TPO-chf_ua_2131_Nuggets_9.png" },
        { name: "–ß—ñ–∫–µ–Ω –î–∂—É–Ω—ñ–æ—Ä", calories: 330, price: 73, img: "https://d3tqkqn8yl74v5.cloudfront.net/TPO-chf_ua_3426_CHICKEN_JUNIOR_BEST.png" },
        { name: "–ö—É—Ä—è—á—ñ —Å—Ç—Ä—ñ–ø—Å–∏ 3—à—Ç", calories: 200, price: 97, img: "https://d3tqkqn8yl74v5.cloudfront.net/TPO-chf_ua_3500_3strips.png" }
      ],
      kfc: [
        { name: "Zinger Burger", calories: 610, price: 6, img: "https://i.imgur.com/DrlUPPs.png" },
        { name: "Twister", calories: 480, price: 5, img: "https://i.imgur.com/z04v2Y2.png" },
        { name: "Fries Box", calories: 320, price: 3, img: "https://i.imgur.com/DN9jHZr.png" }
      ]
    };

    const sauces = [
      { name: "–ö–µ—Ç—á—É–ø" },
      { name: "–ì–∞—Ä–±—É–∑–æ–≤–∏–π —Å–æ—É—Å" },
      { name: "–°–∏—Ä–Ω–∏–π —Å–æ—É—Å" },
      { name: "–ß–∞—Å–Ω–∏–∫–æ–≤–∏–π —Å–æ—É—Å" },
      { name: "–ß–∏–ª—ñ —Å–æ—É—Å" }
    ];

    const drinks = [
      { name: "Coca-Cola", img: "https://i.imgur.com/UyjY9v2.png" },
      { name: "Fanta", img: "https://i.imgur.com/PQXtJQx.png" },
      { name: "Sprite", img: "https://i.imgur.com/JkKz0Wb.png" },
      { name: "–í–æ–¥–∞", img: "https://i.imgur.com/7sA5C2x.png" },
      { name: "–ß–∞–π —Ö–æ–ª–æ–¥–Ω–∏–π", img: "https://i.imgur.com/VBoXu3q.png" }
    ];

    // –¢—Ä–∏ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –¥–ª—è –ø–µ—Ä—à–æ—ó –≤–∫–ª–∞–¥–∫–∏
    const firstChoices = [
      { name: "–ö–∞—Ä—Ç–æ–ø–ª—è —Ñ—Ä—ñ", img: "https://i.imgur.com/3pZe5kq.png" },
      { name: "–î—ñ–ø–∏",       img: "https://i.imgur.com/Cl8vQTo.png" },
      { name: "–°–∞–ª–∞—Ç",      img: "https://i.imgur.com/ODQ6oTs.png" }
    ];

    // === –°–¢–ê–ù ===
    let selectedRestaurant = '';
    let excludedDishes = new Set();
    let currentPickedDish = null;

    let builderSelection = {
      dish: null,
      sauce: null,
      drink: null,
      excludedBuilderDishes: new Set()
    };

    // === –§–£–ù–ö–¶–Ü–á ===
    function selectRestaurant(restaurant) {
      selectedRestaurant = restaurant;
      document.getElementById("menuSection").style.display = "block";
      document.getElementById("menuBuilderSection").style.display = "none";
      document.getElementById("restaurantName").textContent =
        restaurant === "mcdonalds" ? "McDonald's" : "KFC";
      renderMenu();
    }

    function renderMenu() {
      const container = document.getElementById("dishList");
      container.innerHTML = '';
      menus[selectedRestaurant].forEach(dish => {
        const div = document.createElement("div");
        div.className = "item" + (excludedDishes.has(dish.name) ? " disabled" : "");
        div.innerHTML = `
          <div class="item-info">
            <img src="${dish.img}" alt="${dish.name}">
            <div class="item-details">
              <strong>${dish.name}</strong><br>
              ${dish.calories} –∫–∫–∞–ª ‚Äî ‚Ç¥${dish.price.toFixed(2)}
            </div>
          </div>
          <button class="btn-danger" onclick="toggleDish('${dish.name}')">
            ${excludedDishes.has(dish.name) ? "–í–∫–ª—é—á–∏—Ç–∏" : "–í–∏–∫–ª—é—á–∏—Ç–∏"}
          </button>
        `;
        container.appendChild(div);
      });
    }

    function toggleDish(name) {
      if (excludedDishes.has(name)) {
        excludedDishes.delete(name);
      } else {
        excludedDishes.add(name);
      }
      renderMenu();
    }

    function filterAndPick() {
      const maxCalories = parseInt(document.getElementById("calorieFilter").value) || 9999;
      const maxPrice = parseFloat(document.getElementById("priceFilter").value) || 9999;
      const filtered = menus[selectedRestaurant].filter(d =>
        d.calories <= maxCalories &&
        d.price <= maxPrice &&
        !excludedDishes.has(d.name)
      );
      if (filtered.length === 0) {
        alert("–ù–µ–º–∞—î –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö —Å—Ç—Ä–∞–≤ üòï");
        return;
      }
      const pick = filtered[Math.floor(Math.random() * filtered.length)];
      if (selectedRestaurant === 'kfc') {
        alert(`üéâ –¢–≤–æ—è —Å—Ç—Ä–∞–≤–∞: ${pick.name}`);
      } else {
        showDishModal(pick);
      }
    }

    // --- –ú–û–î–ê–õ–¨–ù–ï –í–Ü–ö–ù–û –î–õ–Ø –í–ò–ë–†–ê–ù–û–á –°–¢–†–ê–í–ò ---
    function showDishModal(dish) {
      currentPickedDish = dish;
      document.getElementById("modalDishImg").src = dish.img;
      document.getElementById("modalDishName").textContent = dish.name;
      document.getElementById("modalExcludeBtn").textContent =
        excludedDishes.has(dish.name) ? "–í–∫–ª—é—á–∏—Ç–∏ –∑ —Ä–∞–Ω–¥–æ–º–∞" : "–í–∏–∫–ª—é—á–∏—Ç–∏ –∑ —Ä–∞–Ω–¥–æ–º–∞";
      document.getElementById("dishModalOverlay").style.display = "flex";
    }

    function closeDishModal() {
      document.getElementById("dishModalOverlay").style.display = "none";
      currentPickedDish = null;
    }

    function pickAnotherDish() {
      closeDishModal();
      filterAndPick();
    }

    function excludeCurrentDish() {
      if (!currentPickedDish) return;
      const name = currentPickedDish.name;
      if (excludedDishes.has(name)) {
        excludedDishes.delete(name);
      } else {
        excludedDishes.add(name);
      }
      closeDishModal();
      renderMenu();
    }

    function chooseOnlyDish() {
      if (!currentPickedDish) return;
      const name = currentPickedDish.name;
      closeDishModal();
      alert(`–í–∏ –æ–±—Ä–∞–ª–∏ –±–ª—é–¥–æ: ${name}`);
    }

    function chooseMenu() {
      if (!currentPickedDish) return;
      closeDishModal();
      openMenuBuilder(currentPickedDish);
    }

    // --- –í–Ü–î–ö–†–ò–¢–ò –ë–Ü–õ–î–ï–† –ú–ï–ù–Æ ---
    function openMenuBuilder(prefilledDish = null) {
      selectedRestaurant = 'mcdonalds';
      document.getElementById("menuSection").style.display = "none";
      document.getElementById("menuBuilderSection").style.display = "block";
      // –û—á–∏—Å—Ç–∏—Ç–∏ —Å—Ç–∞–Ω
      builderSelection = { dish: null, sauce: null, drink: null, excludedBuilderDishes: new Set() };

      // –°–∫–∏–Ω—É—Ç–∏ –∫–ª–∞—Å–∏ –≤–∫–ª–∞–¥–æ–∫
      document.getElementById('dishesTab').classList.add('active');
      document.getElementById('saucesTab').classList.remove('active');
      document.getElementById('drinksTab').classList.remove('active');

      if (prefilledDish) {
        builderSelection.dish = prefilledDish;
        renderFirstChoices(true);
        document.getElementById("toSaucesBtn").disabled = false;
      } else {
        renderFirstChoices(false);
        document.getElementById("toSaucesBtn").disabled = true;
      }
      renderSaucesList();
      renderDrinksList();
      document.getElementById("toDrinksBtn").disabled = true;
      document.getElementById("finishMenuBtn").disabled = true;
    }

    // --- –í–ö–õ–ê–î–ö–ê 1: –í–ò–ë–Ü–† –Ü–ó –¢–†–¨–û–• + –†–ê–ù–î–û–ú + –í–ò–ö–õ–Æ–ß–ï–ù–ù–Ø ---
    function renderFirstChoices(prefilled = false) {
      const container = document.getElementById("firstChoices");
      container.innerHTML = '';
      if (prefilled && builderSelection.dish) {
        // –ü–æ–∫–∞–∑–∞—Ç–∏ –ª–∏—à–µ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ –æ–±—Ä–∞–Ω–µ –±–ª—é–¥–æ
        const d = builderSelection.dish;
        const div = document.createElement("div");
        div.className = "item";
        div.innerHTML = `
          <div class="item-info">
            <img src="${d.img}" alt="${d.name}">
            <div class="item-details">
              <strong>${d.name}</strong>
            </div>
          </div>
          <button class="btn-danger" onclick="toggleExcludeBuilderDish('${d.name}')">
            ${builderSelection.excludedBuilderDishes.has(d.name) ? "–í–∫–ª—é—á–∏—Ç–∏" : "–í–∏–∫–ª—é—á–∏—Ç–∏"}
          </button>
        `;
        container.appendChild(div);
        return;
      }
      firstChoices.forEach(choice => {
        const isExcluded = builderSelection.excludedBuilderDishes.has(choice.name);
        const isSelected = builderSelection.dish && builderSelection.dish.name === choice.name;
        const div = document.createElement("div");
        div.className = "item" + (isExcluded ? " disabled" : "");
        div.innerHTML = `
          <div class="item-info">
            <img src="${choice.img}" alt="${choice.name}">
            <div class="item-details">
              <strong>${choice.name}</strong>
            </div>
          </div>
          <div>
            <button class="btn" onclick="selectBuilderDish('${choice.name}')" ${isExcluded ? 'disabled' : ''}>
              ${isSelected ? "–û–±—Ä–∞–Ω–æ" : "–í–∏–±—Ä–∞—Ç–∏"}
            </button>
            <button class="btn-danger" onclick="toggleExcludeBuilderDish('${choice.name}')">
              ${isExcluded ? "–í–∫–ª—é—á–∏—Ç–∏" : "–í–∏–∫–ª—é—á–∏—Ç–∏"}
            </button>
          </div>
        `;
        container.appendChild(div);
      });
    }

    function selectBuilderDish(name) {
      if (builderSelection.excludedBuilderDishes.has(name)) return;
      builderSelection.dish = firstChoices.find(c => c.name === name);
      renderFirstChoices();
      document.getElementById("toSaucesBtn").disabled = false;
    }

    function toggleExcludeBuilderDish(name) {
      if (builderSelection.excludedBuilderDishes.has(name)) {
        builderSelection.excludedBuilderDishes.delete(name);
      } else {
        builderSelection.excludedBuilderDishes.add(name);
        if (builderSelection.dish && builderSelection.dish.name === name) {
          builderSelection.dish = null;
          document.getElementById("toSaucesBtn").disabled = true;
        }
      }
      renderFirstChoices();
    }

    function randomizeBuilderDish() {
      const choices = firstChoices.filter(c => !builderSelection.excludedBuilderDishes.has(c.name));
      if (choices.length === 0) {
        alert("–ù–µ–º–∞—î –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ üòï");
        return;
      }
      const pick = choices[Math.floor(Math.random() * choices.length)];
      builderSelection.dish = pick;
      renderFirstChoices();
      document.getElementById("toSaucesBtn").disabled = false;
    }

    function toSauces() {
      if (!builderSelection.dish) return;
      document.getElementById('dishesTab').classList.remove('active');
      document.getElementById('saucesTab').classList.add('active');
      document.getElementById('drinksTab').classList.remove('active');
    }

    // --- –í–ö–õ–ê–î–ö–ê 2: –°–û–£–°–ò ---
    function renderSaucesList() {
      const container = document.getElementById("saucesList");
      container.innerHTML = '';
      sauces.forEach(s => {
        const isSelected = builderSelection.sauce && builderSelection.sauce.name === s.name;
        const div = document.createElement("div");
        div.className = "item";
        div.innerHTML = `
          <div class="item-info">
            <div class="item-details">
              <strong>${s.name}</strong>
            </div>
          </div>
          <button class="btn" onclick="selectBuilderSauce('${s.name}')">
            ${isSelected ? "–û–±—Ä–∞–Ω–æ" : "–í–∏–±—Ä–∞—Ç–∏"}
          </button>
        `;
        container.appendChild(div);
      });
    }

    function selectBuilderSauce(name) {
      builderSelection.sauce = sauces.find(s => s.name === name);
      renderSaucesList();
      document.getElementById("toDrinksBtn").disabled = false;
    }

    function randomizeBuilderSauce() {
      const pick = sauces[Math.floor(Math.random() * sauces.length)];
      builderSelection.sauce = pick;
      renderSaucesList();
      document.getElementById("toDrinksBtn").disabled = false;
    }

    function backToDishes() {
      document.getElementById('saucesTab').classList.remove('active');
      document.getElementById('dishesTab').classList.add('active');
      document.getElementById('drinksTab').classList.remove('active');
    }

    function toDrinks() {
      if (!builderSelection.sauce) return;
      document.getElementById('saucesTab').classList.remove('active');
      document.getElementById('drinksTab').classList.add('active');
      document.getElementById('dishesTab').classList.remove('active');
    }

    // --- –í–ö–õ–ê–î–ö–ê 3: –ù–ê–ü–û–á ---
    function renderDrinksList() {
      const container = document.getElementById("drinksList");
      container.innerHTML = '';
      drinks.forEach(d => {
        const isSelected = builderSelection.drink && builderSelection.drink.name === d.name;
        const div = document.createElement("div");
        div.className = "item";
        div.innerHTML = `
          <div class="item-info">
            <img src="${d.img}" alt="${d.name}">
            <div class="item-details">
              <strong>${d.name}</strong>
            </div>
          </div>
          <button class="btn" onclick="selectBuilderDrink('${d.name}')">
            ${isSelected ? "–û–±—Ä–∞–Ω–æ" : "–í–∏–±—Ä–∞—Ç–∏"}
          </button>
        `;
        container.appendChild(div);
      });
    }

    function selectBuilderDrink(name) {
      builderSelection.drink = drinks.find(d => d.name === name);
      renderDrinksList();
      document.getElementById("finishMenuBtn").disabled = false;
    }

    function randomizeBuilderDrink() {
      const pick = drinks[Math.floor(Math.random() * drinks.length)];
      builderSelection.drink = pick;
      renderDrinksList();
      document.getElementById("finishMenuBtn").disabled = false;
    }

    function backToSauces() {
      document.getElementById('drinksTab').classList.remove('active');
      document.getElementById('saucesTab').classList.add('active');
      document.getElementById('dishesTab').classList.remove('active');
    }

    function finishMenu() {
      const dishName = builderSelection.dish.name;
      const sauceName = builderSelection.sauce.name;
      const drinkName = builderSelection.drink.name;
      alert(`–í–∞—à–µ –º–µ–Ω—é:\n\n–°—Ç—Ä–∞–≤–∞: ${dishName}\n–°–æ—É—Å: ${sauceName}\n–ù–∞–ø—ñ–π: ${drinkName}`);
      document.getElementById("menuBuilderSection").style.display = "none";
      document.getElementById("menuSection").style.display = "block";
      renderMenu();
    }

    // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø–µ—Ä—à—É –≤–∫–ª–∞–¥–∫—É —ñ–∑ —Ç—Ä—å–æ–º–∞ –≤–∞—Ä—ñ–∞–Ω—Ç–∞–º–∏
    function initFirstChoices() {
      renderFirstChoices(false);
      // –ó–∞–±–µ–∑–ø–µ—á–∏—Ç–∏, —â–æ —Ç—ñ–ª—å–∫–∏ –ø–µ—Ä—à–∞ –≤–∫–ª–∞–¥–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞
      document.getElementById('dishesTab').classList.add('active');
      document.getElementById('saucesTab').classList.remove('active');
      document.getElementById('drinksTab').classList.remove('active');
    }
    initFirstChoices();
  </script>
</body>
</html>
